---
title: "ğŸ”¥ (#72) ğŸ”¥ The CSS Unselector"
head:
  - - link
    - rel: canonical
      href: https://michaelnthiessen.com/weekly-071-july-27/
---

å¤©å“ªï¼Œè™½ç„¶å·²ç»æŒç»­å‘å¸ƒäº† 71 å‘¨çš„å‘¨åˆŠï¼Œæˆ‘ä»Šå¤©å·®ç‚¹å¿˜äº†ï¼

æ–°å‘¨åˆŠå‘äº†ï¼Œè™½è¿Ÿä½†åˆ°ï¼

è¿™æ˜¯æœ¬å‘¨çš„ tips å†…å®¹ï¼

â€” Michael

## ğŸ”¥ The CSS Unselector

æèµ· CSS æˆ‘ä»¬é€šå¸¸è®¨è®ºçš„æ˜¯å¦‚ä½•é€šè¿‡é€‰æ‹©å™¨æ¥é€‰æ‹©å…·ä½“å…ƒç´ ã€‚

Part of this process is making sure the selector does not select the wrong elements. This is often the hardest part!

è¦ç¡®ä¿é€‰å¯¹äº†å…ƒç´ ï¼Œè¿™å¾ˆéš¾ã€‚

My blog uses Vue Router, which applies the class .router-link-active to any link that links to the current route (the page weâ€™re on right now). I then use this class to change the colour of the current link, to help the user know where theyâ€™re at.

æˆ‘çš„åšå®¢ä½¿ç”¨äº† Vue Router æä¾›çš„ `.router-link-active` æ¥è®©é“¾æ¥å½“å‰çš„é¡µé¢ã€‚æˆ‘ä¼šæ”¹å˜å½“å‰é“¾æ¥çš„é¢œè‰²ï¼Œè®©ç”¨æˆ·çŸ¥é“æˆ‘ä»¬åœ¨å“ªã€‚

But I wanted to make sure that all links within the page do not get highlighted in the same way.

For example, a table of contents at the beginning of an article should have normal looking links, not the changed colour.

To do this I needed to avoid selecting all of the links with a # in the href attribute:

```
.router-link-active:not([href*='#'])
```

Iâ€™m using a :not query, but then using an attribute selector inside of that.

My actual code is even more fun, because there are a few other things going on that I need to account for:

```
.nav-link.router-link-exact-active:not(.site-title):not([href*='#'])
```

## ğŸ”¥ Dynamic Returns

A composable can either return a single value or an object of values. Typically, these values are refs.

But we can also dynamically switch between the two depending on what we want to use the composable for:

```js
// Grab only the single value
const now = useNow();

// Get more granular access to the composable
const { now, pause, resume } = useNow({ controls: true });
```

This is great because we may only need a single value most of the time. So why complicate the interface for the main use case?

But by dynamically providing the full object of refs, we allow for more advanced use cases as well. Even if they are rarely used.

Here is how we might implement that:

```js
export default useNow(opts) {
const {
  controls = false,
} = opts;

  // Do some things in your composable

  if (controls) {
    return { now, pause, resume };
  } else {
    return now;
  }
}
```

## ğŸ“œ Invalidating Computed Props

How do you force a computed prop to update? And why would you ever find yourself in that situation to begin with?

In this article, Abdelrahman shows us a really clever solution to this very interesting problem he encountered with computed props.

Read it now: Invalidating Computed with the Composition API

## ğŸ’¬ Theory and Practice

"Theory is when you know something, but it doesnâ€™t work. Practice is when something works, but you donâ€™t know why. Programmers combine theory and practice: Nothing works and they donâ€™t know why." â€” Unknown

## ğŸ§  Spaced-repetition: Why there must be one source of truth

**æƒ³è¦é•¿æ—¶é—´ç‰¢ç‰¢è®°ä½æŸäº›äº‹æƒ…ï¼Œæœ€å¥½æ–¹å¼å°±æ˜¯å®šæœŸå›é¡¾ï¼Œé€æ¸å¢åŠ å›é¡¾çš„é—´éš” ğŸ‘¨â€ğŸ”¬**

**å®é™…ä¸Šï¼Œè®°ä½è¿™äº› tips æ¯”å‘å‘†æœ‰ç”¨å¾—å¤šï¼Œè¿™æ˜¯å‡ å‘¨å‰çš„ä¸€ä¸ª tip å¯ä»¥å”¤èµ·ä½ çš„è®°å¿†ã€‚**

This is the most critical principle of state management that I know:

Each piece of state has a single owner, a single source of truth.

No one else is allowed to modify the state. It's just borrowed temporarily.

If you have an array in a Vuex store, only that Vuex store can update it. Anywhere in your app that needs that value must get it from the store (directly or through another component).

If the state is owned by a component, only that component can modify it. This means other components must emit an event to that component, which can then decide what it wants to do.

Why?

If you allow state to be modified from anywhere, your code becomes a tangled mess.

With a single source of truth, you can easily understand what's happening.

The best code is easily understood.

_p.s. I also have two courses: [Reusable Components](https://michaelnthiessen.com/reusable-components) and [Clean Components](https://michaelnthiessen.com/clean-components)_

## æ¥æº

åŸæ–‡ <https://michaelnthiessen.com/weekly-071-july-27/>

æœ¬ä½œå“é‡‡ç”¨ [çŸ¥è¯†å…±äº«ç½²åâ€”ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®](http://creativecommons.org/licenses/by-sa/4.0/) è¿›è¡Œè®¸å¯ã€‚
