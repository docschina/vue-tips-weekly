# ğŸ”¥ (#69) æ”¹è¿›æˆ‘çš„ç”µå­ä¹¦å·¥å…·

2022 å¹´ 7 æœˆ

## ä½œè€…è¯´

å˜¿ï¼Œå„ä½ï¼

ä¸Šå‘¨æˆ‘èŠ±äº†ä¸€äº›æ—¶é—´æ¥å‡çº§æˆ‘çš„ç”µå­ä¹¦å·¥å…·ã€‚

æˆ‘æœªæ¥å¯èƒ½ä¼šç»§ç»­å‘å¸ƒç”µå­ä¹¦ï¼Œå¦‚æœç”µå­ä¹¦åˆ¶ä½œè¶Šå®¹æ˜“æŒç»­å‘å¸ƒçš„æœºä¼šå°±è¶Šå¤§ã€‚ä¼˜åŒ–å·¥å…·çš„è¿‡ç¨‹ä¼šå¾ˆæœ‰è¶£ï¼

å—åˆ° Nuxt çš„å¯å‘ï¼Œæˆ‘å†³å®šä½¿ç”¨åŸºäºæ–‡ä»¶å¤¹çš„æ–¹å¼ã€‚ä½†ä¼šç•¥æœ‰ä¸åŒï¼š

```
content/
layouts/
styles/
table-of-contents.json
```

æ‰€æœ‰çš„ Markdown æ–‡ä»¶æ”¾å…¥ `content/` ä¸­ï¼Œé€šè¿‡ `front matter` å­—æ®µç”¨æ¥è®¾å®šå¸ƒå±€æ–¹å¼ï¼š

```
---
layout: chapter
title: Forgotten Features
subtitle: "All those things you forgot Vue could do, or didn't know about in the first place."
---
```

å¸ƒå±€æ–‡ä»¶ä½¿ç”¨ `mustache` åŒ…æä¾›çš„æœ‰ mustache è¯­æ³•æ¥ç»„ç»‡ HTMLï¼š

```html
<div class="chapter">
  <h3>Chapter</h3>
  <h1>{{ &title }}</h1>
  <p>{{ &subtitle }}</p>
</div>

<div class="tips">{{ &content }}</div>
```

å› ä¸ºæ‰€æœ‰çš„å­—æ®µéƒ½å¯ä»¥é€šè¿‡ Markdown è§£æå™¨æ¥è·å–ï¼Œè¿™æ„å‘³ç€å¯ä»¥åœ¨å­—æ®µä¸­ä½¿ç”¨ Markdown è¯­æ³•ã€‚è¿™æˆ‘éœ€è¦é€šè¿‡ `&<var>` è¯­æ³•æ¥è½¬ä¹‰æ‰€æœ‰çš„ HTML æ ‡ç­¾ã€‚

æ‰€æœ‰çš„æ ·å¼è¿˜æ˜¯åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚æˆ‘æœªæ¥è®¡åˆ’æ¯ç§å¸ƒå±€éƒ½æœ‰ç‹¬ç«‹çš„æ ·å¼ã€‚

æœ€åï¼Œ`table-of-contents` æ˜¯ä¸€ä¸ª JSON æ•°ç»„ç”¨æ¥æŒ‡å®šå†…å®¹çš„é¡ºåºï¼š

```json
[
  "cover",
  "table-of-contents",
  "intro",
  "ch-css",
  //...
  "ch-forgotten",
  "back-cover"
]
```

è¿™æ ·è¶³å¤Ÿäº†ï¼

æ¥ä¸‹æ¥æ˜¯ tips å†…å®¹ã€‚

â€”Michael

## ğŸ”¥ å¯å¤ç”¨çš„å…­ç§çº§åˆ«

There are six different levels of reusability that you can use in your components.
è¿™é‡Œæœ‰ 6 ç§ä¸åŒçš„å¯å¤ç”¨æ€§ç­‰çº§ï¼Œä½ å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ã€‚

Each level adds more complexity but also increases your ability to reuse code.
æ¯ç§ç­‰çº§ä¼šå¢åŠ æ›´å¤šçš„å¤æ‚æ€§ï¼Œä½†ä¹Ÿä¼šæå‡ä»£ç çš„å¤ç”¨èƒ½åŠ›ã€‚

These levels are the focus of my course, Reusable Components.
è¿™ä¹Ÿæ˜¯æˆ‘çš„è¯¾ç¨‹ã€ŠResable Componentsã€‹ä¸­çš„é‡ç‚¹ã€‚

Here are the six levels of reusability:
è¿™é‡Œæœ‰å…­ä¸­å¯å¤ç”¨æ€§çš„ç­‰çº§ï¼š

1. **æ¨¡æ¿ Templating** â€”é€šè¿‡åœ¨ç»„ä»¶ä¸­åŒ…è£…çš„æ–¹å¼æ¥å¤ç”¨ä»£ç  Reusing code by wrapping it up inside of a component

2. **é…ç½® Configuration** â€”ä½¿ç”¨é…ç½® Prop å®ç°ä¸åŒçš„è¡Œä¸º Using configuration props to allow for varying behaviour
3. **é€‚ç”¨ Adaptability**â€”å…è®¸ç»„ä»¶å‘åå…¼å®¹ Allowing components to become future-proof
4. **åè½¬ Inversion** â€”è®©å…¶ä»–ç»„ä»¶æ§åˆ¶è¿‡ç¨‹ Letting other components control the process
5. **æ‰©å±• Extension** â€”ç»„ä»¶å§‹ç»ˆè€ƒè™‘å¯å¤ç”¨æ€§ Using reusability throughout our component
6. **åµŒå¥— Nesting** â€”åˆ›å»ºå¼ºå¤§çš„ç»„ä»¶å±‚çº§ç»“æ„ Creating powerful hierarchies of components

[åœ¨è¯¾ç¨‹çš„æ‘˜å½•](https://michaelnthiessen.com/6-levels-of-reusability) é‡Œæœ‰æ›´å¤šçš„ç»†èŠ‚

## ğŸ”¥ æ£€æŸ¥ Vue ç‰ˆæœ¬ä¿¡æ¯

åœ¨è¿è¡Œæ—¶é’ŸæŸ¥çœ‹ Vue çš„ç‰ˆæœ¬å¾ˆå®¹æ˜“ï¼š

```javascript
import { version } from 'vue';

if (version.split('.')[0] === '2') {
  console.log('Uh, this app is gonna crash.');
  console.log('Upgrade to Vue 3!');
}
```

## ğŸ“œ å¦‚ä½•å¸è½½å…¨å±€çš„äº‹ä»¶ç›‘å¬å™¨

Markus wrote a great article on the best way to deal with event handlers in your component.It took me awhile to get into the habit of properly dealing with event handlers like this.

Markus å†™äº†ä¸€ç¯‡å¾ˆæ£’çš„æ–‡ç« ï¼Œä»‹ç»äº†åœ¨ç»„ä»¶ä¸­å¦‚ä½•å¤„ç†äº‹ä»¶ç›¸å…³çš„é—®é¢˜ã€‚æˆ‘èŠ±äº†ä¸€æ®µæ—¶é—´æ‰å…»æˆäº†ä»–æåˆ°çš„æ­£ç¡®å¤„ç†äº‹ä»¶ä¹ æƒ¯ã€‚

I recently was working on a component that had about 7 or 8 global event handlers, so I used this array pattern:
æˆ‘æœ€è¿‘å¤„ç†çš„ä¸€ä¸ªç»„ä»¶ä¸­æœ‰ä¸ƒå…«ç§äº‹ä»¶å¤„ç†æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨æ•°ç»„æ¨¡å¼ï¼š

```javascript
export default {
  created() {
    // Add directly so it doesn't become reactive
    this.eventListeners = [
      ['mouseout', this.handleMouseOut],
      ['click', this.handleClick],
      // ...
    ];

    for (const [event, handler] of this.eventListeners) {
      window.addEventListener(event, handler);
    }
  },

  beforeDestroy() {
    for (const [event, handler] of this.eventListeners) {
      window.removeEventListener(event, handler);
    }
  },
};
```

Arrays are nothing new, but it was a nice way to clean it up.
é€šè¿‡æ•°ç»„æ¥å¤„ç†å¾ˆç®€å•ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ç§å¾ˆå¥½çš„æ¸…ç†æ–¹å¼ã€‚

ç»§ç»­é˜…è¯»ï¼š[å¦‚ä½•æ¸…ç†å…¨å±€äº‹ä»¶ç›‘å¬å™¨](https://markus.oberlehner.net/blog/how-to-clean-up-global-event-listeners-intervals-and-third-party-libraries-in-vue-components/)

## ğŸ’¬ ä¸¤ç§ç±»å‹çš„è¯­è¨€

â€œä¸–ç•Œä¸Šåªæœ‰ä¸¤ç§ï¼ˆç¼–ç¨‹ï¼‰è¯­è¨€ï¼šä¸€ç§æ˜¯è®©äººä»¬æŠ±æ€¨çš„è¯­è¨€ï¼Œå¦ä¸€ç§æ˜¯æ²¡æœ‰äººä½¿ç”¨çš„â€ â€”Bjarne Stroustrup

## ğŸ§  é—´éš”å›é¡¾ï¼šVue Router çš„æ·±åº¦é“¾æ¥

**æƒ³è¦é•¿æ—¶é—´ç‰¢ç‰¢è®°ä½æŸäº›äº‹æƒ…ï¼Œæœ€å¥½æ–¹å¼å°±æ˜¯å®šæœŸå›é¡¾ï¼Œé€æ¸å¢åŠ å›é¡¾çš„é—´éš” ğŸ‘¨â€ğŸ”¬**

**å®é™…ä¸Šï¼Œè®°ä½è¿™äº› tips æ¯”å‘å‘†æœ‰ç”¨å¾—å¤šï¼Œè¿™æ˜¯å‡ å‘¨å‰çš„ä¸€ä¸ª tip å¯ä»¥å”¤èµ·ä½ çš„è®°å¿†ã€‚**

ä½ å¯ä»¥åœ¨ URL ä¸­å­˜å‚¨ä¸€éƒ¨åˆ†çŠ¶æ€ï¼Œæ–¹ä¾¿æ¢å¤é¡µé¢çš„æŸäº›çŠ¶æ€ã€‚

æ¯”å¦‚ï¼Œä½ å¯ä»¥åœ¨åŠ è½½é¡µé¢çš„æ—¶å€™æŒ‡å®šä¸€ä¸ªè¢«é€‰æ‹©çš„æ—¥æœŸèŒƒå›´ï¼š

```
someurl.com/edit?date-range=last-week
```

è¿™å¾ˆå¥½çš„æ–¹æ¡ˆï¼Œå¯¹äºä¸€ä¸ªæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨æ¥è¯´ï¼Œç”¨æˆ·åˆ†äº«é“¾æ¥ä¼šå¾ˆæ–¹ä¾¿ã€‚åœ¨ä¸¤ä¸ªä¸åŒçš„åº”ç”¨ä¸­è·³è½¬çš„åœºæ™¯ï¼Œå’Œå¸¸è§„çš„é“¾æ¥ç›¸æ¯”ï¼Œè¿™ç§æ–¹å¼ä¼šæºå¸¦æ›´å¤šä¿¡æ¯ã€‚

ä½ å¯ä»¥å­˜å‚¨è¿‡æ»¤å‚æ•°ã€æœç´¢å€¼ã€æ˜¯å¦å¼¹çª—ã€å°¤å…¶æ˜¯æ— é™æ»šåŠ¨åŠ è½½ä¸­ä¹‹å‰æ»šåŠ¨åˆ°çš„ä½ç½®ç­‰ç­‰ã€‚

`vue-router` å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è·å–å‚æ•°ï¼Œå…¶ä»–çš„ Vue æ¡†æ¶æ¯”å¦‚ Nuxt å’Œ Vuepress ä¹Ÿä¸€æ ·ï¼š

```javascript
const dateRange = this.$route.query.dateRange;
```

å¦‚æœè¦æ›´æ–°å‚æ•°ï¼Œå¯æ”¹å˜ `RouterLink` ç»„ä»¶çš„å‚æ•°ï¼š

```html
<RouterLink
  :to="{
  query: {
    dateRange: newDateRange
  }
}"
></RouterLink>
```

è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

[https://codesandbox.io/s/deep-linking-with-vue-router-vhxkq?file=/src/components/DeepLinking.vue](https://codesandbox.io/s/deep-linking-with-vue-router-vhxkq?file=/src/components/DeepLinking.vue)

p.s. æˆ‘è¿˜æœ‰ä¸¤é—¨è¯¾ç¨‹ [Reusable Components](https://michaelnthiessen.com/reusable-components) å’Œ [Clean Components](https://michaelnthiessen.com/clean-components)

## æ¥æº

https://michaelnthiessen.com/weekly-069-july-13/
