---
title: "🔥 (#82) Mastering Nuxt 3 launch date..."
head:
  - - link
    - rel: canonical
      href: https://michaelnthiessen.com/weekly-082-october-12/
---

# 🔥 (#82) Mastering Nuxt 3 launch date...

October 2022

What's up?!

Mastering Nuxt 3 is going to be launched in two weeks on **October 25th**!

There will be a big launch discount available, and I'll be sending you the link as soon as it's open.

So keep an eye out for that!

In other news, I just recovered from covid. It took 2.5 years but it finally came for me!

Once I recovered it took me another few days just to catch up on sleep.

Now it's time for me to catch up on work!

Have a fantastic week!

—Michael

## 🔥 Defining your own utility classes in Tailwind

One of the best parts of using Tailwind is defining your own utility functions.

I needed a negative `z-index`, but Tailwind didn't have one, so I created my own:

```css
@layer utilities {
  .-z-1 {
    z-index: -1;
  }
}
```

Anything wrapped with `@layer utilities { ... }` will be [picked by Tailwind](https://tailwindcss.com/docs/adding-new-utilities) as a utility class.

If you need to use a custom utility class responsively or deal with hover states or dark mode, you get that all for free in v3.0!

However, if you're in an older version of you can wrap it in a `@variants responsive { ... }` block:

```css
@layer utilities {
  @variants responsive {
    .-z-1 {
      z-index: -1;
    }
  }
}
```

This lets you write `md:-z-1 lg:z-0` and have the utility class respond to screen size.

## 🔥 Multiple v-models

In Vue 3 we're not limited to a single `v-model`:

```html
<AddressForm
  v-model:street-name="streetName"
  v-model:street-number="streetNumber"
  v-model:postal-code="postalCode"
  v-model:province="province"
  v-model:country="country"
/>
```

This makes dealing with complex forms a lot easier!

First, we need to create the props and events for `v-model` to hook into (I've omitted a couple v-models for simplicity):

```html
<!-- AddressForm.vue -->
<script setup>
  // Set up all the props
  defineProps({
    streetName: {
      type: String,
      required: true,
    },
    streetNumber: {
      type: Number,
      required: true,
    },
    // ...
    country: {
      type: String,
      required: true,
    },
  });

  // Set up our events
  defineEmits([
    "update:streetName",
    "update:streetNumber",
    // ...
    "update:country",
  ]);
</script>
```

Then, inside the component we use the prop to read the value, and emit `update:<propname>` to update it:

```html
<template>
  <form>
    <input
      type="text"
      :value="streetName"
      @input="$emit('update:streetName', $event.target.value)"
    />
    <input
      type="text"
      :value="streetNumber"
      @input="$emit('update:streetNumber', $event.target.value)"
    />
    <!-- ... -->
    <input
      type="text"
      :value="country"
      @input="$emit('update:country', $event.target.value)"
    />
  </form>
</template>
```

You can read more about using multiple v-models [here](https://vuejs.org/guide/components/events.html#usage-with-v-model).

## 🐦 Tweet of the week

[https://twitter.com/MichaelThiessen/status/1578412323617865728?s=20&t=a7kv-3xVs0L_ZP1MoC\_-wQ](https://twitter.com/MichaelThiessen/status/1578412323617865728?s=20&t=a7kv-3xVs0L_ZP1MoC_-wQ)

## 📜 Suspense: Everything You Need to Know

I wrote this article for VueSchool.io to clear up some misconceptions I've seen around Suspense.

If you load data in your application, I think you'll find it useful.

There are even some code demos so you can code along with the article!

Read it here: [Suspense: Everything You Need to Know](https://vueschool.io/articles/vuejs-tutorials/suspense-everything-you-need-to-know/)

## 💬 Comments

"Good code is its own best documentation. As you're about to add a comment, ask yourself, 'How can I improve the code so that this comment isn't needed?'" —Steve McConnell

## 🧠 Spaced-repetition: Flatten Nuxt Content Routes

**The best way to commit something to long-term memory is to periodically review it, gradually increasing the time between reviews 👨‍🔬**

**Actually remembering these tips is much more useful than just a quick distraction, so here's a tip from a couple weeks ago to jog your memory.**

I wanted to organize my blog content into several folders:

- Articles: `content/articles/`
- Newsletters: `content/newsletters/`

By default though, Nuxt Content would set up these routes to include those prefixes. But I want all of my routes to be at the root level:

- Articles: michaelnthiessen.com/my-latest-article
- Newsletters: michaelnthiessen.com/most-recent-newsletter

We can do this manually for each Markdown file by overriding the `_path` property through it's frontmatter:

```markdown
---
title: My Latest Article
date: today
_path: "/my-latest-article"
---
```

This is extremely tedious, error-prone, and generally annoying.

Luckily, we can write a simple Nitro plugin that will do this transform automatically.

Create a `content.ts` file in `server/plugins/`:

```javascript
export default defineNitroPlugin((nitroApp) => {
  nitroApp.hooks.hook("content:file:afterParse", (file) => {
    for (const prefix of ["/articles", "/newsletters"]) {
      if (file._path.startsWith(prefix)) {
        // Keep the prefix so we can query based on it still
        file._original_dir = prefix;
        // Remove prefix from path
        file._path = file._path.replace(prefix, "");
      }
    }
  });
});
```

Nitro is the server that Nuxt uses internally. We can hook into it's processing pipeline and do a bit of tweaking.

However, doing this breaks `queryContent` calls if we're filtering based on the path, since `queryContent` is looking at the `_path` property we've just modified. This is why we want to keep that original directory around.

We can modify our `queryContent` calls to filter on this new `_original_dir` property:

```javascript
// Before
queryContent("/articles");

// After
queryContent().where({
  _original_dir: { $eq: "/articles" },
});
```

Pro tip: use `nuxi clean` to force Nuxt Content to re-fetch and re-transform all of your content.

_p.s. I also have three courses: [Vue Tips Collection](https://michaelnthiessen.com/vue-tips-collection), [Reusable Components](https://michaelnthiessen.com/reusable-components) and [Clean Components](https://michaelnthiessen.com/clean-components)_

## 来源

原文 https://michaelnthiessen.com/weekly-082-october-12/

本作品采用[知识共享署名-相同方式共享 4.0 国际许可协议](http://creativecommons.org/licenses/by-sa/4.0/)进行许可。
