---
title: "ğŸ”¥ (#82) æœ‰å…³ã€ŠMastering Nuxt 3ã€‹å‘å¸ƒæ—¥æœŸçš„ä¿¡æ¯"
head:
  - - link
    - rel: canonical
      href: https://michaelnthiessen.com/weekly-082-october-12/
---

# ğŸ”¥ (#82) æœ‰å…³ã€ŠMastering Nuxt 3ã€‹å‘å¸ƒæ—¥æœŸçš„ä¿¡æ¯

2022 å¹´ 10 æœˆ

æœ€è¿‘æ€ä¹ˆæ ·ï¼Ÿ

ã€ŠMastering Nuxt 3ã€‹å°†åœ¨ä¸¤å‘¨åçš„ **10 æœˆ 25 æ—¥** å‘å¸ƒï¼

å±Šæ—¶ä¼šæœ‰ä¸€ä¸ªå¾ˆå¤§çš„å‘å”®æŠ˜æ‰£ï¼Œç­‰åˆ°å‘å”®çš„æ—¶å€™æˆ‘ä¼šå‘é€ç»™ä½ é“¾æ¥ã€‚

æ‰€ä»¥è¯·ç•™æ„è¿™ä¸€ç‚¹ï¼

å¦ä¸€åˆ™æ–°é—»ï¼Œæˆ‘ä»æ–°å† ä¸­æ¢å¤äº†ã€‚ç–«æƒ…å‘ç”Ÿäº†ä¸¤å¹´åŠï¼Œæˆ‘è¿˜æ˜¯æ„ŸæŸ“äº†ã€‚

å½“æˆ‘æ¢å¤åï¼Œæˆ‘åˆèŠ±äº†å‡ å¤©çš„æ—¶é—´æ¥è¡¥è§‰ã€‚

ç°åœ¨æ—¶å€™ç»§ç»­åŠªåŠ›å·¥ä½œäº†ï¼

ç¥ä½ åº¦è¿‡ç¾å¥½çš„ä¸€å‘¨ï¼

â€”Michael

## ğŸ”¥ åœ¨ Tailwind ä¸­å®šä¹‰ä½ è‡ªå·±çš„ class å·¥å…·æ–¹æ³•

Tailwind é‡Œæœ€å¥½çš„ä¸€éƒ¨åˆ†åŠŸèƒ½å°±æ˜¯å®šä¹‰ä½ è‡ªå·±çš„å·¥å…·æ–¹æ³•ã€‚

æˆ‘éœ€è¦ä¸€ä¸ª `z-index` è´Ÿå€¼ï¼Œå• Tailwind å¹¶æ²¡æœ‰æä¾›ï¼Œæ‰€ä»¥æˆ‘å†™äº†ä¸€ä¸ªï¼š

```css
@layer utilities {
  .-z-1 {
    z-index: -1;
  }
}
```

é€šè¿‡ `@layer utilities { ... }` åŒ…è£…çš„å†…å®¹ä¼šè¢«ä½œä¸ºä¸€ä¸ª class æ–¹æ³• [æ·»åŠ è¿› Tailwind](https://tailwindcss.com/docs/adding-new-utilities) ã€‚

å¦‚æœä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰ class æ–¹æ³•æ¥å¤„ç†å“åº”å¼ï¼Œå¤„ç† hover çŠ¶æ€ï¼Œæˆ–è€…æš—é»‘æ¨¡å¼ï¼Œéƒ½å¯ä»¥åœ¨ v3.0 é‡Œå®ç°ï¼

ä½†å¦‚æœæ˜¯å†å²ç‰ˆæœ¬ï¼Œä½ å¯ä»¥æŠŠä»£ç åŒ…è£…è¿› `@variants responsive { ... }` ï¼š

```css
@layer utilities {
  @variants responsive {
    .-z-1 {
      z-index: -1;
    }
  }
}
```

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `md:-z-1 lg:z-0` æ¥å“åº”å¼åœ°æ ¹æ®å±å¹•å°ºå¯¸è¿›è¡Œè®¾ç½®ã€‚

## ğŸ”¥ å¤šä¸ª v-model

Vue3 ä¸­ä¸é™åˆ¶ `v-model` æ•°é‡ï¼š

```html
<AddressForm
  v-model:street-name="streetName"
  v-model:street-number="streetNumber"
  v-model:postal-code="postalCode"
  v-model:province="province"
  v-model:country="country"
/>
```

å¯ä»¥æ›´å®¹æ˜“åœ°å¤„ç†å¤æ‚çš„è¡¨æ ¼ï¼

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª props å’Œ å¤„ç† `v-model` çš„äº‹ä»¶ï¼ˆè¿™é‡Œç®€åŒ–äº† v-model çš„æ•°é‡ï¼‰ï¼š

```html
<!-- AddressForm.vue -->
<script setup>
  // Set up all the props
  defineProps({
    streetName: {
      type: String,
      required: true,
    },
    streetNumber: {
      type: Number,
      required: true,
    },
    // ...
    country: {
      type: String,
      required: true,
    },
  });

  // Set up our events
  defineEmits([
    "update:streetName",
    "update:streetNumber",
    // ...
    "update:country",
  ]);
</script>
```

åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ prop è¯»å–å€¼ï¼Œä½¿ç”¨ `update:<propname>` æ¥è§¦å‘æ›´æ–°ï¼š

```html
<template>
  <form>
    <input
      type="text"
      :value="streetName"
      @input="$emit('update:streetName', $event.target.value)"
    />
    <input
      type="text"
      :value="streetNumber"
      @input="$emit('update:streetNumber', $event.target.value)"
    />
    <!-- ... -->
    <input
      type="text"
      :value="country"
      @input="$emit('update:country', $event.target.value)"
    />
  </form>
</template>
```

ä½ å¯ä»¥åœ¨å®˜æ–¹æ–‡æ¡£ä¸­é˜…è¯»å¤šä¸ª v-model çš„ [æ›´å¤šä¿¡æ¯](https://vuejs.org/guide/components/events.html#usage-with-v-model)ã€‚

## ğŸ¦ æœ¬å‘¨å‘æ¨å†…å®¹

[https://twitter.com/MichaelThiessen/status/1578412323617865728?s=20&t=a7kv-3xVs0L_ZP1MoC\_-wQ](https://twitter.com/MichaelThiessen/status/1578412323617865728?s=20&t=a7kv-3xVs0L_ZP1MoC_-wQ)

## ğŸ“œ å…³äº Suspense ä½ éœ€è¦çš„çŸ¥é“çš„ä¸€åˆ‡

æˆ‘åœ¨ VueSchool.io å†™äº†è¿™ç¯‡æ–‡ç« ï¼Œç”¨æ¥è§£é‡Šå…³äºè¿™ä¸ªæ¦‚å¿µçš„è¯¯è§£ã€‚

å¦‚æœä½ éœ€è¦åœ¨åº”ç”¨ä¸­è½½å…¥æ•°æ®ï¼ŒSuspense ä¼šå¾ˆæœ‰ç”¨ã€‚

è¿™é‡Œæœ‰äº›ç¤ºä¾‹ï¼Œä½ å¯ä»¥ä¸€è¾¹é˜…è¯»ä¸€è¾¹ç¼–å†™ä»£ç ï¼

ç‚¹å‡»é˜…è¯»ï¼š [å…³äº Suspense ä½ éœ€è¦çš„çŸ¥é“çš„ä¸€åˆ‡](https://vueschool.io/articles/vuejs-tutorials/suspense-everything-you-need-to-know/)ã€‚

## ğŸ’¬ ä»£ç æ³¨é‡Š

â€œå¥½çš„ä»£ç æœ¬èº«å°±æ˜¯æœ€å¥½çš„æ–‡æ¡£ã€‚å¦‚æœä½ éœ€è¦æ·»åŠ ä»£ç æ³¨é‡Šï¼Œåº”å½“é—®é—®è‡ªå·±ï¼Œâ€˜æˆ‘å¯ä»¥æ€æ ·æ”¹è¿›ä»£ç ï¼Œå°±å¯ä»¥ä¸éœ€è¦ç¼–å†™æ³¨é‡Šäº†ï¼Ÿâ€™â€ â€”Steve McConnell

## ğŸ§  é—´éš”é‡å¤ï¼šæ‰å¹³åŒ– Nuxt Content è·¯ç”±

**æƒ³è¦é•¿æ—¶é—´ç‰¢ç‰¢è®°ä½æŸäº›äº‹æƒ…ï¼Œæœ€å¥½æ–¹å¼å°±æ˜¯å®šæœŸå›é¡¾ï¼Œé€æ¸å¢åŠ å›é¡¾çš„é—´éš” ğŸ‘¨â€ğŸ”¬**

**å®é™…ä¸Šï¼Œè®°ä½è¿™äº› tips æ¯”å‘å‘†æœ‰ç”¨å¾—å¤šï¼Œè¿™æ˜¯å‡ å‘¨å‰çš„ä¸€ä¸ª tip å¯ä»¥å”¤èµ·ä½ çš„è®°å¿†ã€‚**

æˆ‘æƒ³æŠŠæˆ‘çš„åšå®¢å†…å®¹ç»„ç»‡æˆå‡ ä¸ªæ–‡ä»¶å¤¹ï¼š

- æ–‡ç« ï¼š`content/articles/`
- Newslettersï¼š`content/newsletters/`

é»˜è®¤æƒ…å†µä¸‹ï¼ŒNuxt Content ä¼šå°†è¿™äº›è·¯ç”±è®¾ç½®ä¸ºåŒ…æ‹¬è¿™äº›å‰ç¼€ã€‚ä½†æˆ‘å¸Œæœ›æˆ‘æ‰€æœ‰çš„è·¯ç”±éƒ½æ˜¯åœ¨æ ¹çº§åˆ«ï¼š

- æ–‡ç« : michaelnthiessen.com/my-latest-article
- Newslettersï¼šï¼šmichaelnthiessen.com/most-recent-newsletter

æˆ‘ä»¬å¯ä»¥é€šè¿‡è¦†ç›– `_path` å±æ€§ï¼Œä¸ºæ¯ä¸ª Markdown æ–‡ä»¶æ‰‹åŠ¨åšåˆ°è¿™ä¸€ç‚¹ï¼Œé€šè¿‡è®¾ç½® frontmatterï¼š

```markdown
---
title: My Latest Article
date: today
_path: "/my-latest-article"
---
```

è¿™æ˜¯å¾ˆç¹ççš„ï¼Œå®¹æ˜“å‡ºé”™çš„ï¼Œè€Œä¸”ä¸€èˆ¬æ¥è¯´å¾ˆçƒ¦äººã€‚

å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªç®€å•çš„ Nitro æ’ä»¶ï¼Œè‡ªåŠ¨å®Œæˆè¿™ä¸€è½¬æ¢ã€‚

åœ¨ `server/plugins/` åˆ›å»ºä¸€ä¸ª `content.ts` æ–‡ä»¶ï¼š

```javascript
export default defineNitroPlugin((nitroApp) => {
  nitroApp.hooks.hook("content:file:afterParse", (file) => {
    for (const prefix of ["/articles", "/newsletters"]) {
      if (file._path.startsWith(prefix)) {
        // Keep the prefix so we can query based on it still
        file._original_dir = prefix;
        // Remove prefix from path
        file._path = file._path.replace(prefix, "");
      }
    }
  });
});
```

Nitro æ˜¯ Nuxt å†…éƒ¨ä½¿ç”¨çš„æœåŠ¡å™¨ã€‚æˆ‘ä»¬å¯ä»¥è¿›å…¥å¤„ç†è¿‡ç¨‹ï¼Œåšä¸€äº›è°ƒæ•´ã€‚

å¦‚æœæˆ‘ä»¬æ ¹æ®è·¯å¾„è¿›è¡Œè¿‡æ»¤ï¼Œè¿™æ ·åšä¼šç ´å `queryContent` çš„è°ƒç”¨ï¼Œå› ä¸º`queryContent` æ­£åœ¨æŸ¥çœ‹æˆ‘ä»¬åˆšåˆšä¿®æ”¹çš„ `_path` å±æ€§ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä¿ç•™é‚£ä¸ªåŸå§‹ç›®å½•ã€‚

æˆ‘ä»¬å¯ä»¥ä¿®æ”¹æˆ‘ä»¬çš„ `queryContent` è°ƒç”¨æ¥è¿‡æ»¤è¿™ä¸ªæ–°çš„ `_original_dir` å±æ€§ã€‚

```javascript
// Before
queryContent("/articles");

// After
queryContent().where({
  _original_dir: { $eq: "/articles" },
});
```

æç¤ºï¼šä½¿ç”¨ `nuxi clean` æ¥å¼ºåˆ¶ Nuxt Content é‡æ–°è·å–å¹¶é‡æ–°è½¬æ¢ä½ çš„æ‰€æœ‰å†…å®¹ã€‚

_p.s. I also have three courses: [Vue Tips Collection](https://michaelnthiessen.com/vue-tips-collection), [Reusable Components](https://michaelnthiessen.com/reusable-components) and [Clean Components](https://michaelnthiessen.com/clean-components)_

## æ¥æº

åŸæ–‡ https://michaelnthiessen.com/weekly-082-october-12/

æœ¬ä½œå“é‡‡ç”¨[çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®](http://creativecommons.org/licenses/by-sa/4.0/)è¿›è¡Œè®¸å¯ã€‚
