---
title: "ğŸ”¥ (#80) Component Metadata"
head:
  - - link
    - rel: canonical
      href: https://michaelnthiessen.com/weekly-080-september-28/
---

# ğŸ”¥ (#80) Component Metadata

2022 å¹´ 9 æœˆ

Hey!

æœ¬å‘¨æˆ‘å¼€å§‹å½•åˆ¶ã€ŠMastering Nuxt 3ã€‹çš„ç¬¬ä¸€æ‰¹è§†é¢‘ã€‚

æˆ‘å·²ç»æœ‰ä¸€æ®µæ—¶é—´æ²¡æœ‰åšè¿‡å‡ºé•œè§†é¢‘äº†ï¼Œæ‰€ä»¥æˆ‘éœ€è¦ä¸€äº›æ—¶é—´æ¥æ‰¾å›æˆ‘çš„èŠ‚å¥ï¼Œä½†åˆ°ç›®å‰ä¸ºæ­¢è¿˜ä¸é”™ï¼

è¯·é˜…è¯»è¿™äº› tipsï¼Œç”Ÿæ´»æ„‰å¿«ï¼

â€”Michael

## ğŸ”¥ ä¸è¦è¦†ç›–ç»„ä»¶ CSS

ä»ç»„ä»¶å¤–éƒ¨ä¿®æ”¹ç»„ä»¶çš„æ ·å¼å¾ˆè½»æ¾æ–¹ä¾¿ï¼Œå¦‚æœä½ éœ€è¦çš„åªæ˜¯ä¸€ä¸ªå°å°çš„ä¿®æ”¹ï¼Œçœ‹èµ·æ¥ä¼¼ä¹æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚

æ¯”å¦‚ä½ æœ‰ä¸€ä¸ªæ™®é€šçš„è“è‰²æŒ‰é’®ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä½ éœ€è¦æ”¹æˆç»¿è‰²æŒ‰é’®ã€‚ä½ å¯ä»¥è¿™æ ·åœ¨çˆ¶çº§ç»„ä»¶è¦†ç›–é¢œè‰²ï¼š

```html
<template>
  <button class="green">Make this button green</button>
</template>

<style>
  .green.button {
    background: green;
  }
</style>
```

ä»£ç æ˜¯èƒ½è¿è¡Œçš„ï¼Œä½†æ˜¯æ•ˆæœéå¸¸å®¹æ˜“æ”¶åˆ°å½±å“ã€‚

å¦‚æœç±»åæ”¹å˜äº†æ€ä¹ˆåŠï¼Ÿ

å¦‚æœç»„ä»¶çš„ HTML ç»“æ„ä¿®æ”¹äº†æ€ä¹ˆåŠï¼Ÿ

å…¶ä»–äººå¦‚æœéœ€è¦ä¿®æ”¹è¿™ä¸ªç»„ä»¶ï¼Œå¯èƒ½ä¸çŸ¥é“ç»„ä»¶çš„èƒŒæ™¯è‰²è¢«è¦†ç›–äº†ã€‚

ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥åªæ‰©å±•æŒ‰é’®ç»„ä»¶çš„åŠŸèƒ½ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°†ä¿®æ”¹æŒ‰é’®çš„æ‰€æœ‰ä»£ç ä¿ç•™åœ¨æŒ‰é’®ç»„ä»¶ä¸­ã€‚

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å‘æŒ‰é’®ç»„ä»¶æ·»åŠ ä¸€ä¸ª `is green` å±æ€§ï¼š

```html
<template>
  <button is-green>Make this button green</button>
</template>

<style>
  /* No extra styles needed! */
</style>
```

æˆ‘åˆ›å»ºäº†ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºäº†åŸå§‹ç»„ä»¶å’Œæ·»åŠ äº† prop çš„æ–°ç»„ä»¶: [https://codesandbox.io/s/wizardly-aryabhata-kn37d?file=/src/components/Button.vue](https://codesandbox.io/s/wizardly-aryabhata-kn37d?file=/src/components/Button.vue)ã€‚

## ğŸ”¥ Component Metadata

å¹¶ä¸æ˜¯ä½ æ·»åŠ åˆ°ç»„ä»¶ä¸­çš„æ¯ä¸€ä¸ªä¿¡æ¯éƒ½æ˜¯çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œæœ‰æ—¶éœ€è¦æ·»åŠ å…ƒæ•°æ®ï¼Œå‘å…¶ä»–ç»„ä»¶æä¾›æ›´å¤šä¿¡æ¯ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨å¸Œæœ›æ­¤å¸ƒå±€çŸ¥é“æ¯ä¸ªå°éƒ¨ä»¶åº”å ç”¨å¤šå°‘åˆ—ï¼Œå¯ä»¥å°†å…¶ç›´æ¥æ·»åŠ åˆ°ç»„ä»¶ä¸Šä½œä¸ºå…ƒæ•°æ®ï¼š

```javascript
export default {
  name: "LiveUsersWidget",
  // Just add it as an extra property
  columns: 3,
  props: {
    // ...
  },
  data() {
    return {
      //...
    };
  },
};
```

æ‚¨å°†åœ¨ç»„ä»¶ä¸Šæ‰¾åˆ°æ­¤å…ƒæ•°æ®ä½œä¸ºå±æ€§ï¼š

```javascript
import LiveUsersWidget from "./LiveUsersWidget.vue";
const { columns } = LiveUsersWidget;
```

You can also access the metadata from within the component through the special `$options` property:

```javascript
export default {
  name: "LiveUsersWidget",
  columns: 3,
  created() {
    // `$options` contains all the metadata for a component
    console.log(`Using ${this.$options.metadata} columns`);
  },
};
```

Just keep in mind that this metadata is the same for each component instance and is _not_ reactive.

Other uses for this include (but are not limited to):

- Keeping version numbers for individual components
- Custom flags for build tools to treat components differently
- Adding custom features to components beyond computed props, data, watchers, etc.
- and many more I can't think of!

See a live example here: [https://codesandbox.io/s/vue-metadata-bew9j?file=/src/App.vue](https://codesandbox.io/s/vue-metadata-bew9j?file=/src/App.vue)

## ğŸ“œ Coding Better Composables: Options Object (1/5)

I teamed up with Vue Mastery to create this series on coding better composables.

In this series we cover five different patterns.

For each, we show how you can implement it and then we see it in action with a composable from VueUse.

This first article is on using an options object to easily configure the behaviour of your composable.

Read it here: [Coding Better Composables: Options Object (1/5)](https://www.vuemastery.com/blog/coding-better-composables-1-of-5)

## ğŸ’¬ Data structures

"Bad programmers worry about the code. Good programmers worry about data structures and their relationships." â€”Linus Torvalds

## ğŸ§  Spaced-repetition: Async Without Await

**The best way to commit something to long-term memory is to periodically review it, gradually increasing the time between reviews ğŸ‘¨â€ğŸ”¬**

**Actually remembering these tips is much more useful than just a quick distraction, so here's a tip from a couple weeks ago to jog your memory.**

Using async logic with the composition API can be tricky at times.

We need to put things in the correct order, or the `await` keyword will mess things up with our reactivity.

But with the Async Without Await pattern, we donâ€™t need to worry about all of this:

```javascript
const title = ref("Basic Title");
// We can place this async function wherever we want
const { state } = useAsyncState(fetchData());
const betterTitle = computed(() => `${title.value}!`);
```

Hereâ€™s how this works:

1. We hook up all of our refs _synchronously_
2. Updates happen _asynchronously_ in the background
3. Because of reactivity, everything â€œjust worksâ€

Hereâ€™s a basic sketch of what the `useAsyncState` composable from VueUse is doing to implement this:

```javascript
export default useAsyncState(promise) {
  // 1. Create state ref synchronously
  const state = ref(null);

  const execute = async () => {
    // 3. Reactivity will update this when it resolves
    state.value = await promise;
  }

  // 2. Execute promise asynchronously in the background
  execute();
  return state;
}
```

_p.s. I also have three courses: [Vue Tips Collection](https://michaelnthiessen.com/vue-tips-collection), [Reusable Components](https://michaelnthiessen.com/reusable-components) and [Clean Components](https://michaelnthiessen.com/clean-components)_

## æ¥æº

åŸæ–‡ https://michaelnthiessen.com/weekly-080-september-28/

æœ¬ä½œå“é‡‡ç”¨[çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®](http://creativecommons.org/licenses/by-sa/4.0/)è¿›è¡Œè®¸å¯ã€‚
