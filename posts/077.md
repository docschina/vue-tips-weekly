---
title: "ğŸ”¥ (#77) æ‰å¹³åŒ– Nuxt Content è·¯ç”±"
head:
  - - link
    - rel: canonical
      href: https://michaelnthiessen.com/weekly-077-september-07/
---

# ğŸ”¥ (#77) æ‰å¹³åŒ– Nuxt Content è·¯ç”±

2022 å¹´ 9 æœˆ

Hey!

æˆ‘ç›®å‰æ­£å¿™äºç¼–å†™ã€ŠMastering Nuxt 3ã€‹ï¼Œä½†æˆ‘ä»ç„¶ä¼šæŠ½å‡ºä¸€äº›æ—¶é—´æ¥åˆ›ä½œå…¶ä»–å†…å®¹ã€‚

è¿™æ®µæ—¶é—´å¯¹æˆ‘æ¥è¯´å¾ˆå¿™ï¼Œä½†æˆ‘å¾ˆé«˜å…´èƒ½ä»äº‹æ¿€åŠ¨äººå¿ƒçš„å·¥ä½œï¼

æˆ‘ä¹Ÿåœ¨è¿ç§»æˆ‘çš„ç½‘ç«™ï¼Œä» Gridsome è¿ç§»åˆ° Nuxt 3 ä¸Šã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§å¾ˆå¤æ‚çš„é¡¹ç›®ï¼Œå› ä¸ºæˆ‘çš„ç½‘ç«™æœ‰å¾ˆå¤šäº‹æƒ…å‘ç”Ÿã€‚ä½†ä¸ Nuxt åˆä½œæ€»æ˜¯å¾ˆæ„‰å¿«çš„ï¼

æˆ–è®¸æˆ‘åº”è¯¥å†™ä¸€äº›å…³äºè¿ç§»çš„å¸–å­ï¼Ÿ

æˆ‘ç°åœ¨æ²‰æµ¸åœ¨ Nuxt é‡Œ ï¼Œæ‰€ä»¥ä»Šå¤©ï¼Œæˆ‘ä»¬è¦ç”¨ä¸¤ä¸ª Nuxt æŠ€å·§ã€‚

ç¥ä½ æœ‰ä¸€ä¸ªæ„‰å¿«çš„ä¸€å‘¨!

â€” Michael

## ğŸ“œ å¼ºåˆ¶ Vue é‡æ–°æ¸²æŸ“

æˆ‘æœ€åˆå†™è¿™ç¯‡æ–‡ç« æ˜¯åœ¨ 4 å¹´å‰ï¼Œæ‰€ä»¥ç°åœ¨æ˜¯æ—¶å€™æ›´æ–°äº†ã€‚

è¿™æ˜¯æˆ‘æœ€æ—©å†™çš„æ–‡ç« ä¹‹ä¸€ï¼Œè€Œä¸”ä¸€ç›´å¾ˆå—æ¬¢è¿ï¼Œæœ‰è¶…è¿‡ 50 ä¸‡é˜…è¯»çš„é˜…è¯»é‡ã€‚

ç°åœ¨æˆ‘é’ˆå¯¹ Vue 3 è¿›è¡Œäº†æ›´æ–°ï¼Œå¹¶å¯¹å®ƒè¿›è¡Œäº†ä¸€äº›æ‰©å±•ã€‚

[åœ¨è¿™é‡Œé˜…è¯»æ–‡ç« ](https://michaelnthiessen.com/force-re-render)ã€‚

## ğŸ”¥ å¦‚ä½•ä¿®å¤ Vue ä¸­çš„ TypeScript Intellisense Template é”™è¯¯

æˆ‘æœ€è¿‘åœ¨åšä¸€ä¸ª Vue 3 é¡¹ç›®çš„æ—¶å€™é‡åˆ°äº†è¿™ä¸ªé”™è¯¯ã€‚

```text
TypeScript intellisense is disabled on template. To enable, configure `"jsx": "preserve"` in the `"compilerOptions"` property of tsconfig or jsconfig. To disable this prompt instead, configure `"experimentalDisableTemplateSupport": true` in `"vueCompilerOptions"` property.volar
```

ä¸å¿…æƒŠæ…Œï¼Œåªè¦ç¦ç”¨è¿™ä¸ª Volar ä¿¡æ¯ï¼š[é—®é¢˜ç»†èŠ‚](https://github.com/johnsoncodehk/volar/issues/1219#issuecomment-1104548432)ã€‚

åœ¨ä½ çš„ `.tsconfig` æ–‡ä»¶ä¸­ï¼Œä½ éœ€è¦æ·»åŠ  `"jsx": "preserve"` åœ¨ `compilerOptions` éƒ¨åˆ†ã€‚

```javascript
{
  "compilerOptions": {
    "jsx": "preserve"
  }
}
```

æˆ‘ä½¿ç”¨çš„æ˜¯ Nuxt 3ï¼Œæ‰€ä»¥æˆ‘çš„ TypeScript é…ç½®æ–‡ä»¶çœ‹èµ·æ¥æœ‰ç‚¹ä¸åŒã€‚

```json
{
  // https://v3.nuxtjs.org/concepts/typescript
  "extends": "./.nuxt/tsconfig.json",
  "compilerOptions": {
    "jsx": "preserve"
  }
}
```

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ [jsconfig](https://code.visualstudio.com/docs/languages/jsconfig#_jsconfig-options) æ–‡ä»¶ï¼Œå®ƒå¯èƒ½çœ‹èµ·æ¥æ›´æ¥è¿‘äºè¿™æ ·ã€‚

```json
{
  "compilerOptions": {
    "module": "commonjs",
    "target": "es6",
    "jsx": "preserve"
  },
  "include": ["src/**/*"]
}
```

`.tsconfig` ä¸Šçš„ `jsx` é€‰é¡¹ [æ§åˆ¶ ts å¦‚ä½•è½¬æ¢å’Œè¾“å‡º](https://www.typescriptlang.org/tsconfig#jsx) `.tsx` æ–‡ä»¶ï¼Œä½†è¿™ä¸ªé”™è¯¯å‘ç”Ÿåœ¨æ²¡æœ‰ `tsx` æ‰©å±•åçš„ `.vue` æ–‡ä»¶ã€‚

å› æ­¤ï¼Œæ”¹å˜è¿™ä¸ªé€‰é¡¹ä»¥æ¶ˆé™¤è­¦å‘Šå¯¹æˆ‘ä»¬çš„é¡¹ç›®æ²¡æœ‰å®é™…å½±å“ã€‚åœ¨ Vue ä¸­ï¼Œæˆ‘ä»¬åªä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œæ‰€ä»¥è¿™ä¸ªé€‰é¡¹å¹¶ä¸å½±å“æˆ‘ä»¬æ­£åœ¨åšçš„ä»»ä½•äº‹æƒ…ã€‚

è¿™ä¸ªé—®é¢˜å¯èƒ½æ˜¯å› ä¸º VS Code ç”¨æ¥æä¾› Intellisense åŠŸèƒ½çš„ TypeScript è¯­è¨€æœåŠ¡è€Œå‘ç”Ÿçš„ã€‚Volar ä½¿ç”¨è¿™é¡¹æœåŠ¡ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œå®ƒæ²¡æœ‰æ§åˆ¶æƒã€‚

## ğŸ”¥ æ‰å¹³åŒ– Nuxt Content è·¯ç”±

æˆ‘æƒ³æŠŠæˆ‘çš„åšå®¢å†…å®¹ç»„ç»‡æˆå‡ ä¸ªæ–‡ä»¶å¤¹ï¼š

- æ–‡ç« ï¼š`content/articles/`
- Newslettersï¼š`content/newsletters/`

é»˜è®¤æƒ…å†µä¸‹ï¼ŒNuxt Content ä¼šå°†è¿™äº›è·¯ç”±è®¾ç½®ä¸ºåŒ…æ‹¬è¿™äº›å‰ç¼€ã€‚ä½†æˆ‘å¸Œæœ›æˆ‘æ‰€æœ‰çš„è·¯ç”±éƒ½æ˜¯åœ¨æ ¹çº§åˆ«ï¼š

- æ–‡ç« : michaelnthiessen.com/my-latest-article
- Newslettersï¼šï¼šmichaelnthiessen.com/most-recent-newsletter

æˆ‘ä»¬å¯ä»¥é€šè¿‡è¦†ç›– `_path` å±æ€§ï¼Œä¸ºæ¯ä¸ª Markdown æ–‡ä»¶æ‰‹åŠ¨åšåˆ°è¿™ä¸€ç‚¹ï¼Œé€šè¿‡è®¾ç½® frontmatterï¼š

```markdown
---
title: My Latest Article
date: today
_path: "/my-latest-article"
---
```

è¿™æ˜¯å¾ˆç¹ççš„ï¼Œå®¹æ˜“å‡ºé”™çš„ï¼Œè€Œä¸”ä¸€èˆ¬æ¥è¯´å¾ˆçƒ¦äººã€‚

å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªç®€å•çš„ Nitro æ’ä»¶ï¼Œè‡ªåŠ¨å®Œæˆè¿™ä¸€è½¬æ¢ã€‚

åœ¨ `server/plugins/` åˆ›å»ºä¸€ä¸ª `content.ts` æ–‡ä»¶ï¼š

```javascript
export default defineNitroPlugin((nitroApp) => {
  nitroApp.hooks.hook("content:file:afterParse", (file) => {
    for (const prefix of ["/articles", "/newsletters"]) {
      if (file._path.startsWith(prefix)) {
        // Keep the prefix so we can query based on it still
        file._original_dir = prefix;
        // Remove prefix from path
        file._path = file._path.replace(prefix, "");
      }
    }
  });
});
```

Nitro æ˜¯ Nuxt å†…éƒ¨ä½¿ç”¨çš„æœåŠ¡å™¨ã€‚æˆ‘ä»¬å¯ä»¥è¿›å…¥å¤„ç†è¿‡ç¨‹ï¼Œåšä¸€äº›è°ƒæ•´ã€‚

å¦‚æœæˆ‘ä»¬æ ¹æ®è·¯å¾„è¿›è¡Œè¿‡æ»¤ï¼Œè¿™æ ·åšä¼šç ´å `queryContent` çš„è°ƒç”¨ï¼Œå› ä¸º`queryContent` æ­£åœ¨æŸ¥çœ‹æˆ‘ä»¬åˆšåˆšä¿®æ”¹çš„ `_path` å±æ€§ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä¿ç•™é‚£ä¸ªåŸå§‹ç›®å½•ã€‚

æˆ‘ä»¬å¯ä»¥ä¿®æ”¹æˆ‘ä»¬çš„ `queryContent` è°ƒç”¨æ¥è¿‡æ»¤è¿™ä¸ªæ–°çš„ `_original_dir` å±æ€§ã€‚

```javascript
// Before
queryContent("/articles");

// After
queryContent().where({
  _original_dir: { $eq: "/articles" },
});
```

æç¤ºï¼šä½¿ç”¨ `nuxi clean` æ¥å¼ºåˆ¶ Nuxt Content é‡æ–°è·å–å¹¶é‡æ–°è½¬æ¢ä½ çš„æ‰€æœ‰å†…å®¹ã€‚

## ğŸ“œ æ›´å¥½åœ°ç¼–å†™ç»„åˆé€»è¾‘ï¼šé€‰é¡¹å¯¹è±¡ (3/5)

æˆ‘ä¸ Vue Mastery åˆä½œï¼Œåˆ›å»ºäº†è¿™ä¸ªå¦‚ä½•æ›´å¥½åœ°ç¼–å†™å¯ç»„åˆé€»è¾‘çš„ç³»åˆ—ä¸“æ ã€‚

åœ¨è¿™ä¸ªç³»åˆ—ä¸­ï¼Œæˆ‘ä»¬æ¶µç›–äº†äº”ä¸ªä¸åŒçš„æ¨¡å¼ã€‚

å¯¹äºæ¯ä¸€ç§æ¨¡å¼ï¼Œæˆ‘ä»¬éƒ½å±•ç¤ºäº†å¦‚ä½•å®ç°å®ƒï¼Œç„¶åæˆ‘ä»¬çœ‹åˆ°å®ƒåœ¨ VueUse çš„å¯ç»„åˆé€»è¾‘ä¸­è¿è¡Œã€‚

è¿™ç¬¬ä¸‰ç¯‡æ–‡ç« å±•ç¤ºäº†ä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼Œä½¿ä½ çš„è¿”å›å€¼æ›´æœ‰ç”¨ã€‚

åœ¨è¿™é‡Œé˜…è¯»å®ƒã€‚[æ›´å¥½åœ°ç¼–å†™ç»„åˆé€»è¾‘ï¼šé€‰é¡¹å¯¹è±¡ï¼ˆ3/5ï¼‰](https://www.vuemastery.com/blog/coding-better-composables-3-of-5)ã€‚

"What one programmer can do in one month, two programmers can do in two months."

## ğŸ’¬ ç¨‹åºå‘˜ç”Ÿäº§åŠ›çš„åŸåˆ™ Principles of Programmer Productivity

"ä¸€ä¸ªç¨‹åºå‘˜ä¸€ä¸ªæœˆèƒ½åšçš„äº‹ï¼Œä¸¤ä¸ªç¨‹åºå‘˜ä¸¤ä¸ªæœˆå°±èƒ½å®Œæˆã€‚" â€”Fred Brooks

"What one programmer can do in one month, two programmers can do in two months." â€”Fred Brooks

## ğŸ§  é—´éš”é‡å¤ï¼šThe CSS Unselector

**æƒ³è¦é•¿æ—¶é—´ç‰¢ç‰¢è®°ä½æŸäº›äº‹æƒ…ï¼Œæœ€å¥½æ–¹å¼å°±æ˜¯å®šæœŸå›é¡¾ï¼Œé€æ¸å¢åŠ å›é¡¾çš„é—´éš” ğŸ‘¨â€ğŸ”¬**

**å®é™…ä¸Šï¼Œè®°ä½è¿™äº› tips æ¯”å‘å‘†æœ‰ç”¨å¾—å¤šï¼Œè¿™æ˜¯å‡ å‘¨å‰çš„ä¸€ä¸ª tip å¯ä»¥å”¤èµ·ä½ çš„è®°å¿†ã€‚**

æèµ· CSS æˆ‘ä»¬é€šå¸¸è®¨è®ºçš„æ˜¯å¦‚ä½•é€šè¿‡é€‰æ‹©å™¨æ¥é€‰æ‹©å…·ä½“å…ƒç´ ã€‚

è¦ç¡®ä¿é€‰å¯¹äº†å…ƒç´ ï¼Œè¿™å¾ˆéš¾ã€‚

æˆ‘çš„åšå®¢ä½¿ç”¨äº† Vue Router æä¾›çš„ `.router-link-active` æ¥è®©é“¾æ¥å½“å‰çš„é¡µé¢ã€‚æˆ‘ä¼šæ”¹å˜å½“å‰é“¾æ¥çš„é¢œè‰²ï¼Œè®©ç”¨æˆ·çŸ¥é“æµè§ˆä½ç½®ã€‚

æˆ‘æƒ³ç¡®ä¿é¡µé¢é‡Œçš„é“¾æ¥ä¸ä¼šä½¿ç”¨åŒæ ·çš„æ–¹å¼çªå‡ºå±•ç¤ºã€‚

ä¾‹å¦‚ï¼Œä¸€ç¯‡æ–‡ç« å¼€å¤´çš„ç›®å½•åº”è¯¥æœ‰æ­£å¸¸å¤–è§‚çš„é“¾æ¥ï¼Œè€Œä¸æ˜¯æ”¹å˜é¢œè‰²ã€‚

ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘éœ€è¦é¿å…é€‰æ‹©æ‰€æœ‰åœ¨ `href` å±æ€§ä¸­å¸¦æœ‰ `#` çš„é“¾æ¥ã€‚

```css
.router-link-active: not([href * = "#" ]);
```

æˆ‘æ­£åœ¨ä½¿ç”¨ä¸€ä¸ª `:not` æŸ¥è¯¢ï¼Œä½†åœ¨å…¶ä¸­ä½¿ç”¨ä¸€ä¸ªå±æ€§é€‰æ‹©å™¨ã€‚

æˆ‘çš„å®é™…ä»£ç ç”šè‡³æ›´æœ‰è¶£ï¼Œå› ä¸ºè¿˜æœ‰ä¸€äº›å…¶ä»–çš„äº‹æƒ…éœ€è¦æˆ‘è€ƒè™‘ã€‚

```css
.nav-link.router-link-exact-active:not(.site-title):not([href*='#'])
```

_p.s. I also have three courses: [Vue Tips Collection](https://michaelnthiessen.com/vue-tips-collection), [Reusable Components](https://michaelnthiessen.com/reusable-components) and [Clean Components](https://michaelnthiessen.com/clean-components)_

## æ¥æº

åŸæ–‡ https://michaelnthiessen.com/weekly-077-september-07/

æœ¬ä½œå“é‡‡ç”¨[çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®](http://creativecommons.org/licenses/by-sa/4.0/)è¿›è¡Œè®¸å¯ã€‚
