---
title: "ğŸ”¥ (#75) Nested CSS"
head:
  - - link
    - rel: canonical
      href: https://michaelnthiessen.com/weekly-075-august-24/
---

# ğŸ”¥ (#75) Nested CSS

2022 å¹´ 8 æœˆ

Hey å„ä½ï¼

æˆ‘æœ€è¿‘ä¸“æ³¨å†™æ–‡ç« ã€‚

å¸Œæœ›è¿™å¯ä»¥è½¬åŒ–æˆæ›´å¤šæ–‡ç« å’Œå…¶ä»–äº§å‡ºï¼Œä½†æˆ‘ä¸ä¼šæ‰¿è¯ºç»“æœå¦‚ä½•ã€‚

Have a great week.

â€” Michael

## ğŸ”¥ æ²¡æœ‰ await çš„å¼‚æ­¥æ¨¡å¼ Async Without Await

åœ¨ç»„åˆå¼ API ä¸­ä½¿ç”¨å¼‚æ­¥é€»è¾‘æœ‰æ—¶å€™å¾ˆæ£˜æ‰‹ã€‚

æˆ‘ä»¬éœ€è¦æ­£ç¡®ä¹¦å†™é¡ºåºï¼Œå¦åˆ™ `await` å…³é”®è¯ä¼šè®©æˆ‘ä»¬çš„å“åº”å¼æ··ä¹±ã€‚

å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ²¡æœ‰ await çš„å¼‚æ­¥æ¨¡å¼ï¼Œå°±ä¸ä¼šæœ‰è¿™æ ·çš„å›°æ‰°ï¼š

```javascript
const title = ref("Basic Title");
// æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå¼‚æ­¥å‡½æ•°æ”¾åœ¨ä»»ä½•éœ€è¦çš„åœ°æ–¹
const { state } = useAsyncState(fetchData());
const betterTitle = computed(() => `${title.value}!`);
```

è¿™æ˜¯è¿è¡Œçš„ç»†èŠ‚ï¼š

1. æˆ‘ä»¬ **åŒæ­¥æ–¹å¼** å®šä¹‰ ref
2. æ›´æ–°ä¼š **å¼‚æ­¥** åœ¨åå°è¿è¡Œ
3. ç”±äºå“åº”å¼çš„å­˜åœ¨ï¼Œä¸€äº›éƒ½æ˜¯æ­£å¸¸è¿è¡Œ

ä»¥ä¸‹æ˜¯æ¥è‡ª VueUse çš„ `useAsyncState` å¯ç»„åˆçš„å®ç°æ–¹å¼çš„åŸºæœ¬æ€è·¯ï¼š

```javascript
export default useAsyncState(promise) {
	// 1. åˆ›å»ºåŒæ­¥ ref çŠ¶æ€
  const state = ref(null);

  const execute = async () => {
		// 3. å“åº”å¼ä¼šåœ¨ resolve ä¹‹åæ›´æ–°
    state.value = await promise;
  }

	// 2. åœ¨åå°å¼‚æ­¥æ‰§è¡Œ promise
  execute();
	return state;
}
```

## ğŸ”¥ åµŒå¥— CSS

CSS åµŒå¥—æ˜¯ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œåœ¨å¤§å¤šæ•°æµè§ˆå™¨ä¸­è¿˜ä¸å¯ä»¥ä½¿ç”¨ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ PostCSS é¢„å¤„ç†å™¨æ¥è¾¾åˆ°ç›¸åŒæ•ˆæœï¼š

```css
/* Get rid of link highlighting in article headings */
.content {
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    a {
      @apply text-type-dark;
    }
  }
}
```

æˆ‘æƒ³è¦†ç›–æˆ‘åšå®¢ä¸­æ‰€æœ‰æ ‡é¢˜çš„æ ·å¼ï¼ŒåµŒå¥—è¯­æ³•éå¸¸æ–¹ä¾¿ï¼

å¦‚æœæ²¡æœ‰åµŒå¥—ï¼Œæˆ‘ä¸å¾—ä¸ä¸ºæ¯ä¸ªæ ‡é¢˜å•ç‹¬è®¾å®šå±æ€§ï¼Œè¿™ä¼šå¾ˆéº»çƒ¦ã€‚å°¤å…¶æ˜¯å½“æˆ‘åªæƒ³æŠŠä¸€éƒ¨åˆ†å†…å®¹é€‰ä¸­ï¼š

```css
.content h1 a {
  @apply text-type-dark;
}

.content h2 a {
  @apply text-type-dark;
}

.content h3 a {
  @apply text-type-dark;
}

// ...you get the idea
```

å½“ç„¶ï¼Œåœ¨æµè§ˆå™¨åŸç”Ÿæ”¯æŒä¹‹å‰ï¼Œéœ€è¦ç¼–è¯‘åµŒå¥—çš„ CSSï¼Œå°±åƒæ•°å­¦ä¸­æŠŠ `2(a + b)` ç¼–ç¨‹ `2a + 2b` ä¸€æ ·ã€‚

å…³é”®åœ°æ˜¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‰‹å†™ï¼Œå¯ä»¥æŠ€æœ¯æ‰‹æ®µè§£å†³ã€‚

å¯ä»¥ä½¿ç”¨ PostCSS é‡Œçš„ [postcss-nesting](https://github.com/csstools/postcss-plugins/tree/main/plugins/postcss-nesting) æ’ä»¶æ¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚

å¦‚æœä½ å’Œæˆ‘ä¸€æ ·åœ¨ä½¿ç”¨ Nuxt3 å’Œ TailwindCSSï¼Œå¯ä»¥ä½¿ç”¨ [Nuxt Tailwind](https://tailwindcss.nuxtjs.org/) æ¨¡å—ï¼Œè¯¥æ¨¡å—é»˜è®¤å¼€å¯æ­¤åŠŸèƒ½ï¼

## ğŸ“œ Volar ä¸­å…³äº TypeScript Intellisense çš„æŠ¥é”™

æœ€è¿‘è¿ç§»åšå®¢åˆ° Nuxt3 çš„æ—¶å€™é‡åˆ°ä¸€ä¸ª ts æŠ¥é”™ï¼š

```
TypeScript intellisense is disabled on template...
TypeScript æ™ºèƒ½æç¤ºåœ¨æ¨¡æ¿ä¸­ç¦ç”¨äº†......
```

[è¿™æ˜¯è§£å†³æ–¹æ¡ˆ](https://michaelnthiessen.com/typescript-intellisense-error)

## ğŸ“œ ä½¿ç”¨ Vue æ„å»ºä¸€ä¸ªåœ¨çº¿è¯¾ç¨‹åº”ç”¨

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼ŒAnthony å‘æˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Vue å’Œ Vite æ„å»ºè‡ªå·±çš„åœ¨çº¿è¯¾ç¨‹åº”ç”¨ã€‚

é˜…è¯» [Build an Online Course App with Vue](https://vuejsdevelopers.com/2022/04/13/online-course-vue/)

## ğŸ’¬ æ›´å°‘çš„æ–‡æ¡£å†…å®¹

â€œå½“ç”¨æˆ·åæ§½â€˜çœ‹ä¸æ‡‚ï¼Œæ–‡æ¡£åœ¨å“ªé‡Œï¼Ÿâ€™çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”å½“æ€è€ƒé‡å†™è¿™éƒ¨åˆ†åŠŸèƒ½ï¼Œä½¿å…¶æ¸…æ™°å¯ç”¨ï¼Œè€Œä¸æ˜¯ç¼–å†™æ›´å¤šæ–‡æ¡£åšè§£é‡Šã€‚â€ â€” Jeff Atwood

## ğŸ§  é—´éš”é‡å¤ï¼šRef vs. Reactive

**æƒ³è¦é•¿æ—¶é—´ç‰¢ç‰¢è®°ä½æŸäº›äº‹æƒ…ï¼Œæœ€å¥½æ–¹å¼å°±æ˜¯å®šæœŸå›é¡¾ï¼Œé€æ¸å¢åŠ å›é¡¾çš„é—´éš” ğŸ‘¨â€ğŸ”¬**

**å®é™…ä¸Šï¼Œè®°ä½è¿™äº› tips æ¯”å‘å‘†æœ‰ç”¨å¾—å¤šï¼Œè¿™æ˜¯å‡ å‘¨å‰çš„ä¸€ä¸ª tip å¯ä»¥å”¤èµ·ä½ çš„è®°å¿†ã€‚**

åœ¨ä½¿ç”¨ `composition API` çš„æ—¶å€™ï¼Œç”¨ `ref` å¥½è¿˜æ˜¯ `reactive` æ›´å¥½ï¼Ÿ

è¿™é‡Œåˆ—ä¸¾ä¸€äº› `ref` æ¯” `reactive` æœ‰ä¼˜åŠ¿çš„åœ°æ–¹ã€‚

ä½¿ç”¨ `ref` åŒ…è£¹ js å¯¹è±¡ï¼ŒåŒæ—¶å¯¹æ¯” `reactive` å’Œæ™®é€šå¯¹è±¡çš„ä½¿ç”¨åœºæ™¯ï¼ŒåŒºåˆ«æ˜¾è€Œæ˜“è§ï¼š

```javascript
// I can expect this ref to update reactively
if (burger.value.lettuce) {
  // ...
}

// I have no clue if this value is reactive
if (burger.lettuce) {
  // ...
}
```

ä½¿ç”¨ `watch` æ–¹æ³•æ—¶ï¼Œ`ref` ä¼šè‡ªåŠ¨è§£æ„ï¼Œéå¸¸æ˜“ç”¨ï¼š

```javascript
// Ref
const refBurger = ref({ lettuce: true });
watch(
  // Not much, but it's a bit simpler to work with
  refBurger,
  () => console.log("The burger has changed"),
  { deep: true }
);

// Reactive
const reactiveBurger = reactive({ lettuce: true });
watch(
  () => burger,
  () => console.log("The burger has changed"),
  { deep: true }
);
```

ä½¿ç”¨ `ref` è¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹ï¼Œä½ å¯ä»¥åœ¨ `ref` ä¸­æ”¾å…¥ `reactive` å¯¹è±¡ã€‚è¿™æ ·å¯ä»¥ä»»æ„ç»„åˆ `reactive` å¯¹è±¡ï¼Œåº•å±‚è¿˜æ˜¯ä½¿ç”¨ `ref`ï¼š

```javascript
const lettuce = ref(true);
const burger = reactive({
  // æŠŠ ref å˜æˆå±æ€§
  lettuce,
});

// ç›´æ¥ç›‘å¬ reactive å¯¹è±¡
watchEffect(() => console.log(burger.lettuce));

// ä¹Ÿå¯ä»¥ç›´æ¥ç›‘å¬ ref
watch(lettuce, () => console.log("lettuce has changed"));

setTimeout(() => {
  // æ›´æ–° ref çš„å€¼ï¼Œä¼šè‡ªåŠ¨è§¦å‘æ‰€æœ‰çš„ watchers
  lettuce.value = false;
}, 500);
```

p.s. I also have two courses: [Reusable Components](https://michaelnthiessen.com/reusable-components) and [Clean Components](https://michaelnthiessen.com/clean-components)

## æ¥æº

åŸæ–‡ https://michaelnthiessen.com/weekly-075-august-24/

æœ¬ä½œå“é‡‡ç”¨[çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®](http://creativecommons.org/licenses/by-sa/4.0/)è¿›è¡Œè®¸å¯ã€‚
